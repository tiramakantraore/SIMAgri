(function(e){e.slickQuiz=function(t,n){var r=e(t),t=t;var s=this;var o={checkAnswerText:"VÃ©rifier !",nextQuestionText:"Suivant &raquo;",backButtonText:"",randomSort:true,randomSortQuestions:true,randomSortAnswers:false,preventUnanswered:false,completionResponseMessaging:false,disableResponseMessaging:false};var u="";if(n&&typeof n.disableNext!="undefined"){if(typeof n.preventUnanswered=="undefined"){n.preventUnanswered=n.disableNext}u+="The 'disableNext' option has been deprecated, please use 'preventUnanswered' in it's place.\n\n"}if(u!=""){if(typeof console!="undefined"){console.warn(u)}else{alert(u)}}s.config=e.extend(o,n);var a=e(t).attr("id");var f={starter:"#"+a+" .startQuiz",checker:"#"+a+" .checkAnswer",next:"#"+a+" .nextQuestion",back:"#"+a+" .backToQuestion"};var l={quizName:"#"+a+" .quizName",quizArea:"#"+a+" .quizArea",quizResults:"#"+a+" .quizResults",quizResultsCopy:"#"+a+" .quizResultsCopy",quizHeader:"#"+a+" .quizHeader",quizScore:"#"+a+" .quizScore",quizLevel:"#"+a+" .quizLevel"};var c=s.config.json?s.config.json:typeof quizJSON!="undefined"?quizJSON:null;var h=s.config.randomSort||s.config.randomSortQuestions?c.questions.sort(function(){return Math.round(Math.random())-.5}):c.questions;var p={1:c.info.level1,2:c.info.level2,3:c.info.level3,4:c.info.level4,5:c.info.level5};var d=h.length;s.method={setupQuiz:function(){e(l.quizName).hide().html(c.info.name).fadeIn(1e3);e(l.quizHeader).hide().prepend(c.info.main).fadeIn(1e3);e(l.quizResultsCopy).append(c.info.results);var t=e('<ol class="questions"></ol>'),n=1;for(i in h){if(h.hasOwnProperty(i)){var r=h[i];var o=e('<li class="question" id="question'+(n-1)+'"></li>');o.append('<div class="questionCount">Question <span class="current">'+n+'</span> of <span class="total">'+d+"</span></div>");o.append("<h3>"+n+". "+r.q+"</h3>");var u=0;for(i in r.a){if(r.a.hasOwnProperty(i)){var a=r.a[i];if(a.correct){u++}}}var p="question"+(n-1);var v=e('<ul class="answers"></ul>');var m=s.config.randomSort||s.config.randomSortAnswers?r.a.sort(function(){return Math.round(Math.random())-.5}):r.a;for(i in m){if(m.hasOwnProperty(i)){var a=m[i],g=p+"_"+i.toString();var y='<input id="'+g+'" name="'+p+'" type="'+(u>1?"checkbox":"radio")+'" />';var b='<label for="'+g+'">'+a.option+"</label>";var w=e("<li></li>").append(y).append(b);v.append(w)}}o.append(v);if(!s.config.disableResponseMessaging){var E=e('<ul class="responses"></ul>');E.append('<li class="correct">'+r.correct+"</li>");E.append('<li class="incorrect">'+r.incorrect+"</li>");o.append(E)}if(s.config.backButtonText&&s.config.backButtonText!=""){o.append('<a href="" class="button backToQuestion">'+s.config.backButtonText+"</a>")}if(s.config.disableResponseMessaging||s.config.completionResponseMessaging){o.append('<a href="" class="button nextQuestion checkAnswer">'+s.config.nextQuestionText+"</a>")}else{o.append('<a href="" class="button nextQuestion">'+s.config.nextQuestionText+"</a>");o.append('<a href="" class="button checkAnswer">'+s.config.checkAnswerText+"</a>")}t.append(o);n++}}e(l.quizArea).append(t);e(f.starter).fadeIn(500)},startQuiz:function(t){e(t).fadeOut(300,function(){var t=e("#"+a+" .questions li").first();if(t.length){t.fadeIn(500)}})},checkAnswer:function(t){var n=e(e(t).parents("li.question")[0]),r=n.find("input:checked"),o=h[parseInt(n.attr("id").replace(/(question)/,""))].a;var u=[];for(i in o){if(o.hasOwnProperty(i)){var a=o[i];if(a.correct){u.push(a.option)}}}var f=[];r.each(function(){if(e(".ui-mobile").length>0){var t=e(this).next("label").find("span.ui-btn-text").html()}else{var t=e(this).next("label").html()}f.push(t)});if(s.config.preventUnanswered&&f.length==0){alert("You must select at least one answer.");return false}var l=s.method.compareAnswers(u,f);if(l){n.addClass("correctResponse")}if(!s.config.disableResponseMessaging){if(!s.config.completionResponseMessaging){n.find(".answers").hide();n.find(".responses").show();e(t).hide();n.find(".nextQuestion").fadeIn(300);n.find(".backToQuestion").fadeIn(300)}if(l){n.find(".correct").fadeIn(300)}else{n.find(".incorrect").fadeIn(300)}}},nextQuestion:function(t){var n=e(e(t).parents("li.question")[0]),r=n.next(".question"),i=n.find("input:checked");if(s.config.preventUnanswered&&i.length==0){return false}if(r.length){n.fadeOut(300,function(){r.find(".backToQuestion").show().end().fadeIn(500)})}else{s.method.completeQuiz()}},backToQuestion:function(t){var n=e(e(t).parents("li.question")[0]),r=n.find(".answers");if(r.css("display")==="block"){var i=n.prev(".question");n.fadeOut(300,function(){i.removeClass("correctResponse");i.find(".responses, .responses li").hide();i.find(".answers").show();i.find(".checkAnswer").show();if(!s.config.disableResponseMessaging&&!s.config.completionResponseMessaging){i.find(".nextQuestion").hide()}if(i.attr("id")!="question0"){i.find(".backToQuestion").show()}else{i.find(".backToQuestion").hide()}i.fadeIn(500)})}else{n.find(".responses").fadeOut(300,function(){n.removeClass("correctResponse");n.find(".responses li").hide();r.fadeIn(500);n.find(".checkAnswer").fadeIn(500);n.find(".nextQuestion").hide();if(n.attr("id")!="question0"){n.find(".backToQuestion").show()}else{n.find(".backToQuestion").hide()}})}},completeQuiz:function(){var t=e("#"+a+" .correctResponse").length,n=s.method.calculateLevel(t),r=p[n];e(l.quizScore+" span").html(t+" / "+d);e(l.quizLevel+" span").html(r);e(l.quizLevel).addClass("level"+n);e(l.quizArea).fadeOut(300,function(){if(s.config.completionResponseMessaging&&!s.config.disableResponseMessaging){e("#"+a+" .questions input").prop("disabled",true);e("#"+a+" .questions .button, #"+a+" .questions .questionCount").hide();e("#"+a+" .questions .question, #"+a+" .questions .responses").show();e(l.quizResults).append(e("#"+a+" .questions")).fadeIn(500)}else{e(l.quizResults).fadeIn(500)}})},compareAnswers:function(e,t){if(e.length!=t.length){return false}var e=e.sort(),t=t.sort();for(var n=0,r=e.length;n<r;n++){if(e[n]!==t[n]){return false}}return true},calculateLevel:function(e){var t=e/d,n=0;if(s.method.inRange(0,.2,t)){n=5}else if(s.method.inRange(.21,.4,t)){n=4}else if(s.method.inRange(.41,.6,t)){n=3}else if(s.method.inRange(.61,.8,t)){n=2}else if(s.method.inRange(.81,1,t)){n=1}return n},inRange:function(e,t,n){if(n>=e&&n<=t){return true}return false}};s.init=function(){s.method.setupQuiz();e(f.starter).live("click",function(e){e.preventDefault();s.method.startQuiz(this)});e(f.checker).live("click",function(e){e.preventDefault();s.method.checkAnswer(this)});e(f.back).live("click",function(e){e.preventDefault();s.method.backToQuestion(this)});e(f.next).live("click",function(e){e.preventDefault();s.method.nextQuestion(this)})};s.init()};e.fn.slickQuiz=function(t){return this.each(function(){if(undefined==e(this).data("slickQuiz")){var n=new e.slickQuiz(this,t);e(this).data("slickQuiz",n)}})}})(jQuery)