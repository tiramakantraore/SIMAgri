(function(e){var t=function(e,t,n,r){this.x1=e;this.x2=n;this.y1=t;this.y2=r};t.prototype.contains=function(e){return this.x1<=e.x1&&e.x2<=this.x2&&this.y1<=e.y1&&e.y2<=this.y2};t.prototype.transform=function(e,n){return new t(this.x1+e,this.y1+n,this.x2+e,this.y2+n)};e.fn.positionBy=function(n){var r=new Date;if(this.length==0){return this}var n=e.extend({target:null,targetPos:null,elementPos:null,x:null,y:null,positions:null,addClass:false,force:false,container:window,hideAfterPosition:false},n);if(n.x!=null){var i=n.x;var s=n.y;var o=0;var u=0}else{var a=e(e(n.target)[0]);var o=a.outerWidth();var u=a.outerHeight();var f=a.offset();var i=f.left;var s=f.top}var l=i+o;var c=s+u;return this.each(function(){var r=e(this);if(!r.is(":visible")){r.css({left:-3e3,top:-3e3}).show()}var o=r.outerWidth();var u=r.outerHeight();var a=[];var f=[];a[0]=new t(l,s,l+o,s+u);f[0]=[1,7,4];a[1]=new t(l,c-u,l+o,c);f[1]=[0,6,4];a[2]=new t(l,c,l+o,c+u);f[2]=[1,3,10];a[3]=new t(l-o,c,l,c+u);f[3]=[1,6,10];a[4]=new t(i,c,i+o,c+u);f[4]=[1,6,9];a[5]=new t(i-o,c,i,c+u);f[5]=[6,4,9];a[6]=new t(i-o,c-u,i,c);f[6]=[7,1,4];a[7]=new t(i-o,s,i,s+u);f[7]=[6,0,4];a[8]=new t(i-o,s-u,i,s);f[8]=[7,9,4];a[9]=new t(i,s-u,i+o,s);f[9]=[0,7,4];a[10]=new t(l-o,s-u,l,s);f[10]=[0,7,3];a[11]=new t(l,s-u,l+o,s);f[11]=[0,10,3];a[12]=new t(l-o,s,l,s+u);f[12]=[13,7,10];a[13]=new t(l-o,c-u,l,c);f[13]=[12,6,3];a[14]=new t(i,c-u,i+o,c);f[14]=[15,1,4];a[15]=new t(i,s,i+o,s+u);f[15]=[14,0,9];if(n.positions!==null){var h=n.positions[0]}else if(n.targetPos!=null&&n.elementPos!=null){var h=[];h[0]=[];h[0][0]=15;h[0][1]=7;h[0][2]=8;h[0][3]=9;h[1]=[];h[1][0]=0;h[1][1]=12;h[1][2]=10;h[1][3]=11;h[2]=[];h[2][0]=2;h[2][1]=3;h[2][2]=13;h[2][3]=1;h[3]=[];h[3][0]=4;h[3][1]=5;h[3][2]=6;h[3][3]=14;var h=h[n.targetPos][n.elementPos]}var p=a[h];var d=h;if(!n.force){$window=e(window);var v=$window.scrollLeft();var m=$window.scrollTop();var g=new t(v,m,v+$window.width(),m+$window.height());var y;if(n.positions){y=n.positions}else{y=[h]}var b=[];while(y.length>0){var w=y.shift();if(b[w]){continue}b[w]=true;if(!g.contains(a[w])){if(n.positions===null){y=jQuery.merge(y,f[w])}}else{p=a[w];break}}}r.parents().each(function(){var t=e(this);if(t.css("position")!="static"){var n=t.offset();p=p.transform(-n.left,-n.top);return false}});var E={left:p.x1,top:p.y1};if(n.hideAfterPosition){E["display"]="none"}r.css(E);if(n.addClass){r.removeClass("positionBy0 positionBy1 positionBy2 positionBy3 positionBy4 positionBy5 "+"positionBy6 positionBy7 positionBy8 positionBy9 positionBy10 positionBy11 "+"positionBy12 positionBy13 positionBy14 positionBy15").addClass("positionBy"+w)}})}})(jQuery)