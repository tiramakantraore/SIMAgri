(function(e){if(typeof define==="function"&&define.amd){define(["jquery"],e)}else if(typeof exports==="object"){e(require("jquery"))}else{e(jQuery)}})(function(e){var t=navigator.userAgent,n=/iphone/i.test(t),r=/chrome/i.test(t),i=/android/i.test(t),s;e.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},autoclear:true,dataName:"rawMaskFn",placeholder:"_"};e.fn.extend({caret:function(e,t){var n;if(this.length===0||this.is(":hidden")){return}if(typeof e=="number"){t=typeof t==="number"?t:e;return this.each(function(){if(this.setSelectionRange){this.setSelectionRange(e,t)}else if(this.createTextRange){n=this.createTextRange();n.collapse(true);n.moveEnd("character",t);n.moveStart("character",e);n.select()}})}else{if(this[0].setSelectionRange){e=this[0].selectionStart;t=this[0].selectionEnd}else if(document.selection&&document.selection.createRange){n=document.selection.createRange();e=0-n.duplicate().moveStart("character",-1e5);t=e+n.text.length}return{begin:e,end:t}}},unmask:function(){return this.trigger("unmask")},mask:function(t,o){var u,a,f,l,c,h,p,d;if(!t&&this.length>0){u=e(this[0]);var v=u.data(e.mask.dataName);return v?v():undefined}o=e.extend({autoclear:e.mask.autoclear,placeholder:e.mask.placeholder,completed:null},o);a=e.mask.definitions;f=[];l=p=t.length;c=null;e.each(t.split(""),function(e,t){if(t=="?"){p--;l=e}else if(a[t]){f.push(new RegExp(a[t]));if(c===null){c=f.length-1}if(e<l){h=f.length-1}}else{f.push(null)}});return this.trigger("unmask").each(function(){function y(){if(!o.completed){return}for(var e=c;e<=h;e++){if(f[e]&&v[e]===b(e)){return}}o.completed.call(u)}function b(e){if(e<o.placeholder.length)return o.placeholder.charAt(e);return o.placeholder.charAt(0)}function w(e){while(++e<p&&!f[e]);return e}function E(e){while(--e>=0&&!f[e]);return e}function S(e,t){var n,r;if(e<0){return}for(n=e,r=w(t);n<p;n++){if(f[n]){if(r<p&&f[n].test(v[r])){v[n]=v[r];v[r]=b(r)}else{break}r=w(r)}}A();u.caret(Math.max(c,e))}function x(e){var t,n,r,i;for(t=e,n=b(e);t<p;t++){if(f[t]){r=w(t);i=v[t];v[t]=n;if(r<p&&f[r].test(i)){n=i}else{break}}}}function T(e){var t=u.val();var n=u.caret();if(t.length<d.length){O(true);while(n.begin>0&&!f[n.begin-1])n.begin--;if(n.begin===0){while(n.begin<c&&!f[n.begin])n.begin++}u.caret(n.begin,n.begin)}else{var r=O(true);while(n.begin<p&&!f[n.begin])n.begin++;u.caret(n.begin,n.begin)}y()}function N(e){O();if(u.val()!=g)u.change()}function C(e){if(u.prop("readonly")){return}var t=e.which||e.keyCode,r,i,s;d=u.val();if(t===8||t===46||n&&t===127){r=u.caret();i=r.begin;s=r.end;if(s-i===0){i=t!==46?E(i):s=w(i-1);s=t===46?w(s):s}L(i,s);S(i,s-1);e.preventDefault()}else if(t===13){N.call(this,e)}else if(t===27){u.val(g);u.caret(0,O());e.preventDefault()}}function k(t){if(u.prop("readonly")){return}var n=t.which||t.keyCode,r=u.caret(),s,o,a;if(t.ctrlKey||t.altKey||t.metaKey||n<32){return}else if(n&&n!==13){if(r.end-r.begin!==0){L(r.begin,r.end);S(r.begin,r.end-1)}s=w(r.begin-1);if(s<p){o=String.fromCharCode(n);if(f[s].test(o)){x(s);v[s]=o;A();a=w(s);if(i){var l=function(){e.proxy(e.fn.caret,u,a)()};setTimeout(l,0)}else{u.caret(a)}if(r.begin<=h){y()}}}t.preventDefault()}}function L(e,t){var n;for(n=e;n<t&&n<p;n++){if(f[n]){v[n]=b(n)}}}function A(){u.val(v.join(""))}function O(e){var t=u.val(),n=-1,r,i,s;for(r=0,s=0;r<p;r++){if(f[r]){v[r]=b(r);while(s++<t.length){i=t.charAt(s-1);if(f[r].test(i)){v[r]=i;n=r;break}}if(s>t.length){L(r+1,p);break}}else{if(v[r]===t.charAt(s)){s++}if(r<l){n=r}}}if(e){A()}else if(n+1<l){if(o.autoclear||v.join("")===m){if(u.val())u.val("");L(0,p)}else{A()}}else{A();u.val(u.val().substring(0,n+1))}return l?r:c}var u=e(this),v=e.map(t.split(""),function(e,t){if(e!="?"){return a[e]?b(t):e}}),m=v.join(""),g=u.val();u.data(e.mask.dataName,function(){return e.map(v,function(e,t){return f[t]&&e!=b(t)?e:null}).join("")});u.one("unmask",function(){u.off(".mask").removeData(e.mask.dataName)}).on("focus.mask",function(){if(u.prop("readonly")){return}clearTimeout(s);var e;g=u.val();e=O();s=setTimeout(function(){if(u.get(0)!==document.activeElement){return}A();if(e==t.replace("?","").length){u.caret(0,e)}else{u.caret(e)}},10)}).on("blur.mask",N).on("keydown.mask",C).on("keypress.mask",k).on("input.mask paste.mask",function(){if(u.prop("readonly")){return}setTimeout(function(){var e=O(true);u.caret(e);y()},0)});if(r&&i){u.off("input.mask").on("input.mask",T)}O()})}})})